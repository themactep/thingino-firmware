config BR2_PACKAGE_THINGINO_VPN
	bool

choice
	prompt "VPN Selection"
	default BR2_PACKAGE_THINGINO_VPN_WIREGUARD
	help
	  Select one VPN solution to include in the firmware.
	  Only one VPN can be selected at a time to minimize flash usage.

config BR2_PACKAGE_THINGINO_VPN_NONE
	bool "None"
	help
	  Do not include any VPN solution.

config BR2_PACKAGE_THINGINO_VPN_WIREGUARD
	bool "WireGuard"
	select BR2_PACKAGE_WIREGUARD_TOOLS
	select BR2_PACKAGE_WIREGUARD_LINUX_COMPAT
	select BR2_PACKAGE_THINGINO_VPN
	help
	  Include WireGuard VPN. Fast, modern, secure VPN tunnel.
	  WireGuard is included in the Linux kernel (when available)
	  or as a kernel module for older kernels.

	  https://www.wireguard.com/

config BR2_PACKAGE_THINGINO_VPN_ZEROTIER
	bool "ZeroTier-One"
	select BR2_PACKAGE_ZEROTIER_ONE
	select BR2_PACKAGE_THINGINO_VPN
	depends on BR2_INSTALL_LIBSTDCPP
	depends on BR2_TOOLCHAIN_HAS_THREADS
	help
	  Include ZeroTier-One VPN. Creates virtual Ethernet networks.
	  ZeroTier appears as a virtual network interface and works
	  like you are on the same physical LAN.

	  https://www.zerotier.com/

config BR2_PACKAGE_THINGINO_VPN_TAILSCALE
	bool "Tailscale"
	select BR2_PACKAGE_THINGINO_TAILSCALE
	select BR2_PACKAGE_THINGINO_VPN
	depends on FLASH_SIZE_MB >= 16
	help
	  Include Tailscale VPN. WireGuard-based mesh VPN with
	  centralized coordination. Easy to set up and manage.

	  https://tailscale.com/

endchoice

comment "ZeroTier-One requires a toolchain w/ C++, threads"
	depends on BR2_PACKAGE_THINGINO_VPN_ZEROTIER && (!BR2_INSTALL_LIBSTDCPP || !BR2_TOOLCHAIN_HAS_THREADS)

comment "Tailscale requires flash size > 8MB"
	depends on BR2_PACKAGE_THINGINO_VPN_TAILSCALE && FLASH_SIZE_MB < 16

# Include VPN package definitions (not directly selectable, controlled by choice above)
if BR2_PACKAGE_THINGINO_VPN
source "$BR2_EXTERNAL_THINGINO_PATH/package/thingino-tailscale/Config.in"
source "$BR2_EXTERNAL_THINGINO_PATH/package/zerotier-one/Config.in"
endif
